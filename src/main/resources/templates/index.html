<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
<h1>Welcome to the System</h1>
<div th:if="${user != null}" class="mt-4">
    <p>Welcome, <span th:text="${user.username}">用户</span>!</p>
    <form th:action="@{/api/v1/user/logout}" method="post" id="logoutForm">
        <button type="submit" class="btn btn-danger">登出</button>
    </form>
</div>
<div th:if="${user == null}" class="mt-4">
    <a th:href="@{/login}" class="btn btn-primary me-2">登录</a>
    <a th:href="@{/register}" class="btn btn-success">注册</a>
</div>
<div class="mt-4">
    <a th:href="@{/user/role}" class="btn btn-info">角色管理</a>
</div>
<div class="mt-4">
    <a th:href="@{/product/list}" class="btn btn-info">产品材料管理</a>
</div>
<div class="mt-4">
    <a th:href="@{/produce}" class="btn btn-info">生产管理</a>
</div>
<div class="mt-4">
    <a th:href="@{/creator/objects/customer}" class="btn btn-info">客户管理</a>
</div>
<div class="mt-4">
    <a th:href="@{/creator/objects/supplier}" class="btn btn-info">供应商管理</a>
</div>
<div class="mt-4">
    <a th:href="@{/creator/objects/logistics-company}" class="btn btn-info">物流公司管理</a>
</div>
<div class="mt-4">
    <a th:href="@{/creator/objects-orders/custom}" class="btn btn-info">销售产品管理</a>
</div>
<div class="mt-4">
    <a th:href="@{/creator/objects-orders/supply}" class="btn btn-info">供应订单管理</a>
</div>
<div class="mt-4">
    <a th:href="@{/trade/sale}" class="btn btn-info">出售中心</a>
</div>
<div class="mt-4">
    <a th:href="@{/trade/supply}" class="btn btn-info">采购中心</a>
</div>
<div class="mt-4">
    <a th:href="@{/trade/orders}" class="btn btn-info">用户订单管理</a>
</div>


<script>
    document.getElementById('logoutForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent default form submission
        fetch(this.action, {
            method: this.method,
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            }
        }).then(response => {
            if (response.status === 204) {
                window.location.reload(); // Refresh page after successful logout
            }
        });
    });
</script>
</body>
</html>